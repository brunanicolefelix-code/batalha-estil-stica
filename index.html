<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batalha Estil√≠stica - Teste de Conhecimento</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2c2416 0%, #1a1410 100%);
            color: #d4af37;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border-top: 3px solid #d4af37;
            border-bottom: 3px solid #d4af37;
        }

        h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            letter-spacing: 2px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .login-box {
            background: rgba(139, 69, 19, 0.8);
            border: 3px solid #d4af37;
            border-radius: 10px;
            padding: 40px;
            max-width: 500px;
            margin: 50px auto;
            text-align: center;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .login-box h2 {
            margin-bottom: 30px;
            font-size: 1.8em;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: rgba(0,0,0,0.5);
            border: 2px solid #d4af37;
            color: #d4af37;
            font-family: 'Georgia', serif;
            border-radius: 5px;
            font-size: 1em;
        }

        input[type="text"]::placeholder, textarea::placeholder {
            color: #a0826d;
        }

        button {
            background: linear-gradient(135deg, #d4af37 0%, #b8960f 100%);
            color: #1a1410;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
            font-family: 'Georgia', serif;
        }

        button:hover {
            background: linear-gradient(135deg, #e6c200 0%, #d4af37 100%);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .room-card {
            background: rgba(139, 69, 19, 0.8);
            border: 3px solid #d4af37;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
            transition: all 0.3s ease;
        }

        .room-card:hover {
            background: rgba(139, 69, 19, 1);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.5);
            transform: translateY(-5px);
        }

        .room-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .room-card p {
            font-size: 0.9em;
            color: #a0826d;
            margin-bottom: 15px;
        }

        .game-screen {
            background: rgba(139, 69, 19, 0.8);
            border: 3px solid #d4af37;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #d4af37;
        }

        .game-header h2 {
            font-size: 1.5em;
        }

        .player-name {
            color: #ff9999;
            font-weight: bold;
        }

        .sorteio-info {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #d4af37;
            text-align: center;
        }

        .sorteio-info h3 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .sorteio-info .item {
            font-size: 1.3em;
            font-weight: bold;
            color: #ffd700;
            margin: 10px 0;
        }

        .sorteio-info .label {
            font-size: 0.9em;
            color: #a0826d;
        }

        .game-content {
            margin: 30px 0;
        }

        .game-section {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 5px;
            border: 2px dashed #d4af37;
            margin: 20px 0;
        }

        .game-section h3 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        textarea {
            resize: vertical;
            min-height: 120px;
            width: 100%;
        }

        .feedback {
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            border-left: 4px solid;
            font-size: 1.1em;
        }

        .feedback.correto {
            background: rgba(76, 175, 80, 0.2);
            border-left-color: #4caf50;
            color: #81c784;
        }

        .feedback.incorreto {
            background: rgba(244, 67, 54, 0.2);
            border-left-color: #f44336;
            color: #ef5350;
        }

        .feedback strong {
            font-size: 1.2em;
        }

        .feedback-message {
            margin-top: 10px;
            line-height: 1.6;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .button-group button {
            flex: 1;
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            border-top: 2px solid #d4af37;
            font-size: 0.9em;
            color: #a0826d;
        }

        .timer {
            font-size: 1.2em;
            color: #ff6b6b;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            
            .game-header {
                flex-direction: column;
                gap: 10px;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öîÔ∏è Batalha Estil√≠stica ‚öîÔ∏è</h1>
            <p>Teste seus conhecimentos em Figuras de Linguagem</p>
        </header>

        <!-- TELA DE LOGIN -->
        <div class="screen active" id="loginScreen">
            <div class="login-box">
                <h2>üëë Bem-vindo! üëë</h2>
                <p style="margin-bottom: 20px; color: #a0826d;">Digite seu nome para come√ßar</p>
                <input type="text" id="playerNameInput" placeholder="Seu nome..." maxlength="30">
                <button onclick="startGame()">Entrar</button>
            </div>
        </div>

        <!-- TELA DE SALAS -->
        <div class="screen" id="roomsScreen">
            <h2 style="text-align: center; margin: 30px 0; font-size: 1.8em;">Escolha um Tema:</h2>
            <div class="rooms-grid">
                <div class="room-card">
                    <h3>üè∫ Objetos</h3>
                    <p>Teste com palavras relacionadas a objetos do dia a dia</p>
                    <button onclick="enterRoom('tema1')">Entrar</button>
                </div>
                <div class="room-card">
                    <h3>üçé Alimentos & Elementos</h3>
                    <p>Teste com palavras de alimentos e elementos naturais</p>
                    <button onclick="enterRoom('tema2')">Entrar</button>
                </div>
                <div class="room-card">
                    <h3>üå∏ Natureza & Sentimentos</h3>
                    <p>Teste com palavras de natureza e emo√ß√µes</p>
                    <button onclick="enterRoom('tema3')">Entrar</button>
                </div>
            </div>
        </div>

        <!-- TELA DE JOGO -->
        <div class="screen" id="gameScreen">
            <div class="game-screen">
                <div class="game-header">
                    <h2 id="roomTitle">Tema 1</h2>
                    <span class="player-name" id="playerDisplay">Jogador</span>
                    <button onclick="goBackToRooms()">Voltar</button>
                </div>

                <div class="sorteio-info">
                    <h3>üìö Sua Tarefa:</h3>
                    <div style="margin: 15px 0;">
                        <div class="label">Figura de Linguagem:</div>
                        <div class="item" id="figuraDisplay">-</div>
                    </div>
                    <div style="margin: 15px 0;">
                        <div class="label">Palavra para usar:</div>
                        <div class="item" id="palavraDisplay">-</div>
                    </div>
                </div>

                <div class="game-content">
                    <div class="game-section">
                        <h3>‚úçÔ∏è Escreva sua frase:</h3>
                        <p style="color: #a0826d; margin-bottom: 10px; font-size: 0.9em;">
                            Crie uma frase usando a figura de linguagem e a palavra sorteada
                        </p>
                        <textarea id="fraseUsuario" placeholder="Escreva sua frase aqui..."></textarea>
                        <button id="submitBtn" onclick="submitFrase()" style="width: 100%; margin-top: 15px;">Enviar</button>
                    </div>

                    <div id="feedback"></div>

                    <div class="button-group">
                        <button onclick="novaRodada()">Nova Rodada</button>
                        <button onclick="goBackToRooms()">Voltar aos Temas</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        Trabalho desenvolvido para a disciplina de Estil√≠stica do Texto - PUC Campinas
    </footer>

    <script>
        // Estado do jogo
        let gameState = {
            playerName: '',
            currentRoom: null,
            figura: '',
            palavra: '',
            tema: ''
        };

        // Temas com palavras espec√≠ficas
        const temas = {
            tema1: {
                nome: 'üè∫ Objetos',
                palavras: ['Livro', 'Espada', 'Coroa', 'Porta', 'Janela', 'Mesa', 'Cadeira', 'Rel√≥gio', 'Espelho', 'Chave', 'Caixa', 'Vela', 'Moeda', 'Anel', 'L√¢mpada']
            },
            tema2: {
                nome: 'üçé Alimentos & Elementos',
                palavras: ['P√£o', '√Ågua', 'Fogo', 'Vento', 'Terra', 'Mel', 'Ma√ß√£', 'Leite', 'Sal', 'Trigo', 'Carv√£o', 'Chuva', 'Neve', 'Gelo', 'Areia']
            },
            tema3: {
                nome: 'üå∏ Natureza & Sentimentos',
                palavras: ['Flor', 'Amor', 'Tristeza', '√Årvore', 'P√°ssaro', 'Estrela', 'Lua', 'Sol', 'Nuvem', 'Medo', 'Esperan√ßa', 'Raiva', 'Alegria', 'Saudade', 'Paz']
            }
        };

        // Lista de figuras de linguagem
        const figuras = [
            'Met√°fora', 'Meton√≠mia', 'Hip√©rbole', 'Ironia', 'Personifica√ß√£o',
            'Compara√ß√£o', 'Ant√≠tese', 'Alitera√ß√£o', 'Onomatopeia', 'Paradoxo',
            'Sinestesia', 'Oximoro', 'Eufemismo', 'Litote', 'Sin√©doque'
        ];

        function startGame() {
            const name = document.getElementById('playerNameInput').value.trim();
            if (name === '') {
                alert('Digite seu nome!');
                return;
            }
            gameState.playerName = name;
            
            document.getElementById('loginScreen').classList.remove('active');
            document.getElementById('roomsScreen').classList.add('active');
        }

        function enterRoom(roomId) {
            gameState.currentRoom = roomId;
            gameState.tema = temas[roomId].nome;
            
            sortearNovaRodada();
            
            document.getElementById('roomsScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.add('active');
            
            document.getElementById('playerDisplay').textContent = gameState.playerName;
            document.getElementById('roomTitle').textContent = gameState.tema;
            document.getElementById('fraseUsuario').value = '';
            document.getElementById('feedback').innerHTML = '';
        }

        function sortearNovaRodada() {
            gameState.figura = figuras[Math.floor(Math.random() * figuras.length)];
            const palavrasList = temas[gameState.currentRoom].palavras;
            gameState.palavra = palavrasList[Math.floor(Math.random() * palavrasList.length)];
            
            document.getElementById('figuraDisplay').textContent = gameState.figura;
            document.getElementById('palavraDisplay').textContent = gameState.palavra;
        }

        function submitFrase() {
            const frase = document.getElementById('fraseUsuario').value.trim();
            if (frase === '') {
                alert('Escreva uma frase!');
                return;
            }

            const isCorrect = analisarFrase(frase, gameState.figura, gameState.palavra);
            
            // Mostrar feedback
            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.className = `feedback ${isCorrect ? 'correto' : 'incorreto'}`;
            
            if (isCorrect) {
                feedbackDiv.innerHTML = `
                    <strong>‚úì Correto! Parab√©ns!</strong>
                    <div class="feedback-message">
                        Sua frase usa corretamente a figura de linguagem <strong>${gameState.figura}</strong> 
                        com a palavra <strong>${gameState.palavra}</strong>. Excelente trabalho!
                    </div>
                `;
            } else {
                feedbackDiv.innerHTML = `
                    <strong>‚úó Incorreto</strong>
                    <div class="feedback-message">
                        Sua frase n√£o usa corretamente a figura de linguagem <strong>${gameState.figura}</strong>. 
                        Tente novamente com uma frase que melhor represente essa figura!
                    </div>
                `;
            }

            document.getElementById('fraseUsuario').value = '';
        }

        function analisarFrase(frase, figura, palavra) {
            const fraseMinuscula = frase.toLowerCase();
            const palavraMinuscula = palavra.toLowerCase();

            // Verificar se cont√©m a palavra
            if (!fraseMinuscula.includes(palavraMinuscula)) {
                return false;
            }

            // Verificar caracter√≠sticas da figura
            switch(figura) {
                case 'Met√°fora':
                    return fraseMinuscula.includes(' √© ') && frase.length > 20;
                case 'Meton√≠mia':
                    return /\b(l√™|bebe|assiste|come|v√™|escreve|toca)\b/.test(fraseMinuscula);
                case 'Hip√©rbole':
                    return /\b(milh√£o|bilh√£o|infinito|nunca|sempre|tudo|nada|morrer)\b/.test(fraseMinuscula);
                case 'Ironia':
                    return /\b(claro|√≥bvio|l√≥gico|√© verdade|com certeza|que legal)\b/.test(fraseMinuscula);
                case 'Personifica√ß√£o':
                    return /\b(dan√ßa|canta|chora|sorri|corre|voa|pensa|respira|acorda)\b/.test(fraseMinuscula);
                case 'Compara√ß√£o':
                    return fraseMinuscula.includes(' como ');
                case 'Ant√≠tese':
                    return /\b(mas|por√©m|contudo|entretanto|todavia|por√©m)\b/.test(fraseMinuscula);
                case 'Alitera√ß√£o':
                    return /([a-z])\1{1,}/.test(fraseMinuscula) || /\b\w+\s+\w+\s+\w+/.test(fraseMinuscula);
                case 'Onomatopeia':
                    return /\b(boom|bang|splash|buzz|zzzz|pum|bum|crash|pop|tic|tac)\b/.test(fraseMinuscula);
                case 'Paradoxo':
                    return frase.length > 30;
                case 'Sinestesia':
                    return /\b(cor|som|sabor|textura|aroma|gosto|toque|vis√£o|audi√ß√£o)\b/.test(fraseMinuscula);
                case 'Oximoro':
                    return /\b(sil√™ncio|escurid√£o|morte|vivo|quente|frio|amargo|doce)\b/.test(fraseMinuscula);
                case 'Eufemismo':
                    return /\b(partir|descansar|dormir|ir embora|passar|deixar)\b/.test(fraseMinuscula);
                case 'Litote':
                    return /\b(n√£o √© ruim|n√£o √© feio|n√£o √© mal|n√£o √© pequeno)\b/.test(fraseMinuscula);
                case 'Sin√©doque':
                    return /\b(cabe√ßa|m√£o|cora√ß√£o|corpo|alma|rosto|olho)\b/.test(fraseMinuscula);
                default:
                    return frase.length > 20;
            }
        }

        function novaRodada() {
            sortearNovaRodada();
            document.getElementById('fraseUsuario').value = '';
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('fraseUsuario').focus();
        }

        function goBackToRooms() {
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('roomsScreen').classList.add('active');
            document.getElementById('fraseUsuario').value = '';
            document.getElementById('feedback').innerHTML = '';
        }
    </script>
</body>
</html>
